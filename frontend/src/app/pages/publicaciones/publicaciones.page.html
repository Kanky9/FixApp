<ion-content>
  <app-menu [showBackButton]="true" backButton="/home"></app-menu>

  <div class="discover-container">
    <div class="cont-title">
      <h3>Descubre</h3>
    </div>

    <div class="cont-info">
      <p *ngIf="appliedFiltersText" class="applied-filters">Filtros aplicados: {{ appliedFiltersText }}</p>
    </div>

    <!-- Filtros -->
    <div class="filtros">
      <ion-button color="dark" expand="full" (click)="presentFilters()">
        <ion-label>Filtros <ion-icon name="filter"></ion-icon> </ion-label>
      </ion-button>
    </div>

    <div class="item" *ngFor="let p of filteredProducts">
      <div class="cont-botones">
        <div class="cont-botonmas" (click)="goToPublicacion(p.productId)">
          <button class="botonmas">Ver más...</button>
        </div>
      
        <div class="cont-botonfav">
          <button class="boton-favorito" (click)="toggleFavorite(p.productId)">
            <ion-icon [name]="favoriteMap[p.productId] ? 'heart' : 'heart-outline'"></ion-icon>
          </button>
        </div>
      </div>
      <div class="cont-img">
        <img [src]="p.imagePrincipal" [alt]="p.nombre">
      </div>
      <div class="details">
        <div>
          <h2>{{ p.nombre }}</h2>
        </div>
        <div>
          <p><span><ion-icon slot="start" name="locate"></ion-icon>Ubicación:</span> {{ p.ubicacion }}</p>
        </div>
        <div>
          <p><span><ion-icon slot="start" name="location"></ion-icon>Dirección:</span> {{ p.direccion }}</p>
        </div>
        <div>
          <p><span><ion-icon slot="start" name="call"></ion-icon> Teléfono:</span> {{ p.telefono }}</p>
        </div>
      </div>
    </div>

    <ion-content *ngIf="loading" class="loading">
      <div class="item" *ngFor="let p of [1, 1, 1, 1, 1, 1, 1, 1]">
        <div class="cont-botones">
          <div class="cont-botonfav">
            <button class="boton-favorito">
              <ion-icon name="heart-outline"></ion-icon>
            </button>
          </div>
          <div class="cont-botonmas">
            <button class="botonmas">+</button>
          </div>
        </div>
        <div class="cont-img">
          <ion-skeleton-text animated
            style="width: 100%; height: 200px; background-color: #252A2F;"></ion-skeleton-text>
        </div>
        <div class="details">
          <div>
            <ion-skeleton-text animated style="width: 80%; background-color: #252A2F;"></ion-skeleton-text>
          </div>
          <div>
            <ion-skeleton-text animated style="width: 60%; background-color: #252A2F;"></ion-skeleton-text>
          </div>
          <div>
            <ion-skeleton-text animated style="width: 40%; background-color: #252A2F;"></ion-skeleton-text>
          </div>
        </div>
      </div>
    </ion-content>
  </div>
</ion-content>